#include "hw_int.h"

#include "xspi.h"

static XSpi inst_spi_0 = {0};
static XSpi inst_spi_1 = {0};

static void hwi_spi0_init()
{
	XSpi_Config * conf = XSpi_LookupConfig(XPAR_SPI_0_DEVICE_ID);
	if (conf == NULL) return;
	
	int32_t status = XSpi_CfgInitialize(&inst_spi_0, conf, conf->BaseAddress);
	if (status != XST_SUCCESS) return XST_FAILURE;
	
	status = XSpi_SetOptions(&inst_spi_0, XSP_CLK_PHASE_1_OPTION | XSP_CLK_ACTIVE_LOW_OPTION);
	if (status != XST_SUCCESS) return XST_FAILURE;
	
	XSpi_Start(&inst_spi_0);

	XSpi_IntrGlobalDisable(&inst_spi_0);
}

static void hwi_spi1_init()
{

}

static void hwi_gpioevf_init()
{

}

void hwi_init()
{
	// Init the HW
	hwi_spi0_init();
	hwi_spi1_init();
	hwi_gpioevf_init();
}

void hwi_spi0_transfer(uint8_t * tx_data, uint8_t * rx_data, uint32_t len)
{
	
}

void hwi_spi1_transfer(uint8_t * tx_data, uint8_t * rx_data, uint32_t len)
{
	
}

